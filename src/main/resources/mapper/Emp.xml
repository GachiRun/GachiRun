<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gachi.gachirunpj.">

    <insert id="wsEmpInsert" parameterType="Emp">
        insert into emp(Emp_num, emp_id, emp_passwd, emp_name, emp_nickname, Emp_Hire_Date , Emp_Edit_date , Emp_Email , Emp_birth , Emp_gender  , Emp_phone, Emp_Social)
        values ((nextval('TEST_SEQ') ), #{Emp_id}, #{Emp_passwd}, #{Emp_name}, #{Emp_Nickname},  sysdate(), sysdate(), #{Emp_Email}, #{Emp_birth}, #{Emp_gender}, #{Emp_phone}, '소셜');
    </insert>

    <select id="checkEmpId" parameterType="String" resultType="Emp">
        select * from emp where emp_id = #{emp_id}
    </select>

    <select id="getUserInfo" parameterType="Emp" resultType="Emp">
        select * from emp where Emp_name = #{Emp_name} and Emp_Email = #{Emp_Email} and Emp_phone = #{Emp_phone}
    </select>

    <select id="getUserPWInfo" parameterType="Emp" resultType="Emp">
        select * from emp where Emp_name = #{Emp_name} and Emp_Email = #{Emp_Email} and Emp_phone = #{Emp_phone} and Emp_id = #{Emp_id}
    </select>

    <update id="changePw" parameterType="Map">
        UPDATE Emp e SET e.Emp_passwd = #{Emp_passwd} WHERE e.Emp_num = #{Emp_num}
    </update>

    <select id="getUserInfoNum" parameterType="Emp" resultType="Emp">
        select * from emp where Emp_num = #{Emp_num}
    </select>

    <select id="chkLogin" parameterType="String" resultType="Emp">
        select *
        from emp e, authority a , dept d , posit p
        where e.auth_no = a.auth_no and e.dept_no = d.dept_no and e.posit_no = p.posit_no  and e.emp_id = #{emp_id}
    </select>

</mapper>